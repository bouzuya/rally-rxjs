# rally-rxjs

An unofficial client for [RALLY](https://rallyapp.jp).

This is a [bouzuya/b-o-a][] example.

This is a [bouzuya/vdom-rxjs-ssr][] fork.

## Usage

```
$ npm install
$ npm run build
$ npm start
$ open http://localhost:3000/
```

## Note

## directories and files

```
actions/        ... `type AT = A<P>; type P = ...;`
maps/           ... `type f = (action$: O<A>, state$: O<PT>) => O<A>;`
handlers/       ... `type Handler = (action$: O<A>, options: any) => O<A>;`
inits/          ... `type init = (params: any) => Promise<PT>`
props/          ... `type p = (action$: O<A>, state: <PT>) => O<PT>;`
types/          ... `type PT = { ... };`
requests/       ... `type request = (params: any) => Promise<PT>;`
routes/         ... route config file
styles/         ... less files
views/          ... `type view = (state: PT, helpers: any) => V;`
app.ts          ... `type app = (action$: O<A>, options: any) => O<A>;`
client.ts       ... client entry point. configure handlers and run app.
server.ts       ... server entry point. configure handlers and run app.

A: Action
O: Observable
PT: PropertyType
V: VTree
```

## actions

![init -> load](https://cloud.githubusercontent.com/assets/1221346/13618132/bc7e4222-e5c5-11e5-9a4e-b77a3929d667.png)

```
title: init -> load
participant Browser as B
participant Client as C
participant Server as S
B->S: http get
S->S: init state
S-->B: initial html & state
B->B: render html
B->C: run js (app)
C->C: load state
C->B: render to dom
```

![click -> request -> render](https://cloud.githubusercontent.com/assets/1221346/13618236/5e3d6340-e5c6-11e5-88fa-a346b52f0403.png)

```
title: click -> request -> render
participant Browser as B
participant Client as C
participant Server as S
B->C: click event
C->C: user action (click -> fetch)
C->S: fetch
S-->C: json
C->C: user action (res -> update)
C->B: render
```

These diagram were generated by [js-sequence-diagram](https://bramp.github.io/js-sequence-diagrams/).


## action cycle

```
      O<A> |
   +------>|-------+
   |       |       |
   |       |       |
FW |       |       | AP
   |       |       |
   |       |       |
   +-------|<------+
           | O<A>

O : Observable
A : Action
AP : Application
FW : Framework
```

### rally-rxjs

#### 0.4.0

- AP: 0.3.0
- FW: 0.4.0 final

[0.3.0...0.4.0](https://github.com/bouzuya/rally-rxjs/compare/0.3.0...0.4.0)

#### 0.3.0

- AP: 0.2.0
- FW: 0.3.0

[0.2.0...0.3.0](https://github.com/bouzuya/rally-rxjs/compare/0.2.0...0.3.0)

#### 0.2.0

- AP: 0.1.0
- FW: 0.2.0

[0.1.0...0.2.0](https://github.com/bouzuya/rally-rxjs/compare/0.1.0...0.2.0)

#### 0.1.0

- AP: 0.1.0
- FW: 0.1.0

[initial commit...0.2.0](https://github.com/bouzuya/rally-rxjs/compare/8c4e87420ffd455bfac2a68dca24677a1e35590d...0.1.0)

### AP

#### 0.3.0

- support FW@0.4.0
- rename directory names

#### 0.2.0

- support FW@0.3.0
- add map view

#### 0.1.0

- sign in
- stamp rally create
- stamp rally index
- stamp rally show
- spot create
- spot index

### FW

#### 0.4.0 final

- rename `executors/` to `handlers/`
- extract packages
    - [bouzuya/boajs-handler-dom][]
    - [bouzuya/boajs-handler-history][]
    - [bouzuya/boajs-handler-init][]
    - [bouzuya/boajs-handler-request][]
    - [bouzuya/boajs-router][]
    - [bouzuya/boajs-vdom][]

[bouzuya/boajs-handler-dom]: https://github.com/bouzuya/boajs-handler-dom
[bouzuya/boajs-handler-history]: https://github.com/bouzuya/boajs-handler-history
[bouzuya/boajs-handler-init]: https://github.com/bouzuya/boajs-handler-init
[bouzuya/boajs-handler-request]: https://github.com/bouzuya/boajs-handler-request
[bouzuya/boajs-router]: https://github.com/bouzuya/boajs-router
[bouzuya/boajs-vdom]: https://github.com/bouzuya/boajs-vdom

#### 0.3.0

- extract [bouzuya/b-o-a][]
- extract `executors/`

#### 0.2.0

- `type app = (action$ O<A>) => O<A>;`

#### 0.1.0

- [bouzuya/vdom-rxjs-ssr][]

## License

[MIT](LICENSE)

## Author

[bouzuya][user] &lt;[m@bouzuya.net][email]&gt; ([http://bouzuya.net][url])

[user]: https://github.com/bouzuya
[email]: mailto:m@bouzuya.net
[url]: http://bouzuya.net
[bouzuya/vdom-rxjs-ssr]: https://github.com/bouzuya/vdom-rxjs-ssr
[bouzuya/b-o-a]: https://github.com/bouzuya/b-o-a
